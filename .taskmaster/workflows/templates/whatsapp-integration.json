{
  "name": "WhatsApp Integration Workflow",
  "version": "1.0.0",
  "description": "Complete WhatsApp Web JS integration with multi-session management",
  "category": "messaging-systems",
  "estimatedDuration": "3-5 hours",
  "priority": "high",

  "steps": [
    {
      "id": 1,
      "name": "Setup WhatsApp Web JS Infrastructure",
      "description": "Configure WhatsApp Web JS client and session management",
      "agent": "@messaging-specialist",
      "tasks": [
        "Install and configure WhatsApp Web JS",
        "Setup session storage system",
        "Implement QR code generation",
        "Create session health monitoring"
      ],
      "outputs": ["wa-client-config", "session-storage", "qr-generator", "health-monitor"],
      "validation": {
        "required": true,
        "criteria": ["client-configured", "session-storage-ready"]
      }
    },
    {
      "id": 2,
      "name": "Implement Multi-Session Management",
      "description": "Create system for managing multiple WhatsApp sessions",
      "agent": "@network-engineer",
      "tasks": [
        "Design session load balancing",
        "Implement session failover logic",
        "Create session health checks",
        "Setup rate limiting per session"
      ],
      "outputs": ["load-balancer", "failover-system", "health-checks", "rate-limits"],
      "dependencies": [1],
      "validation": {
        "required": true,
        "criteria": ["load-balancing-active", "failover-working"]
      }
    },
    {
      "id": 3,
      "name": "Create Advanced Template System",
      "description": "Implement WYSIWYG template editor with variable substitution",
      "agent": "@frontend-optimization-expert",
      "tasks": [
        "Build template editor interface",
        "Implement variable substitution engine",
        "Create template categories",
        "Add rich text formatting support"
      ],
      "outputs": ["template-editor", "variable-engine", "template-categories", "formatting-tools"],
      "dependencies": [2],
      "validation": {
        "required": true,
        "criteria": ["editor-functional", "substitution-working"]
      }
    },
    {
      "id": 4,
      "name": "Setup Message Queue System",
      "description": "Implement reliable message queuing with retry logic",
      "agent": "@nodejs-expert",
      "tasks": [
        "Create message queue infrastructure",
        "Implement priority queue system",
        "Setup retry mechanisms",
        "Create delivery tracking"
      ],
      "outputs": ["message-queue", "priority-system", "retry-logic", "delivery-tracking"],
      "dependencies": [3],
      "validation": {
        "required": true,
        "criteria": ["queue-functional", "retry-working"]
      }
    },
    {
      "id": 5,
      "name": "Implement Notification Triggers",
      "description": "Create automated notification triggers for business events",
      "agent": "@api-architect",
      "tasks": [
        "Define notification trigger events",
        "Implement trigger handlers",
        "Create notification scheduling",
        "Setup event-driven messaging"
      ],
      "outputs": ["trigger-events", "event-handlers", "scheduler", "event-system"],
      "dependencies": [4],
      "validation": {
        "required": true,
        "criteria": ["triggers-defined", "events-working"]
      }
    },
    {
      "id": 6,
      "name": "Create Analytics and Reporting",
      "description": "Implement message analytics and performance reporting",
      "agent": "@data-engineer",
      "tasks": [
        "Setup message tracking database",
        "Create analytics dashboard",
        "Implement performance metrics",
        "Create delivery reports"
      ],
      "outputs": ["tracking-db", "analytics-dashboard", "performance-metrics", "delivery-reports"],
      "dependencies": [5],
      "validation": {
        "required": true,
        "criteria": ["tracking-active", "analytics-working"]
      }
    }
  ],

  "qualityGates": [
    {
      "name": "Session Reliability",
      "criteria": "99%+ session uptime with automatic recovery",
      "validation": "stress-test"
    },
    {
      "name": "Message Delivery Rate",
      "criteria": "95%+ message delivery success rate",
      "validation": "delivery-test"
    },
    {
      "name": "Rate Limit Compliance",
      "criteria": "Strict adherence to 1 message/second per session",
      "validation": "rate-limit-test"
    },
    {
      "name": "Template System Accuracy",
      "criteria": "100% accurate variable substitution",
      "validation": "template-test"
    }
  ],

  "rollbackPlan": {
    "steps": [
      "Disable WhatsApp notification triggers",
      "Stop all WhatsApp sessions",
      "Clear message queues",
      "Restore previous notification system"
    ],
    "estimatedTime": "20 minutes"
  },

  "agents": [
    "@messaging-specialist",
    "@network-engineer",
    "@frontend-optimization-expert",
    "@nodejs-expert",
    "@api-architect",
    "@data-engineer"
  ],

  "deliverables": [
    "Multi-session WhatsApp system",
    "Advanced template editor",
    "Message queue infrastructure",
    "Notification trigger system",
    "Analytics dashboard"
  ]
}